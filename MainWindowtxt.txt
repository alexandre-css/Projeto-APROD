import QtQuick 2.15
import QtQuick.Controls 2.15
import QtQuick.Layouts 1.15

ApplicationWindow {
    id: root
    width: 1200
    height: 800
    visible: true
    title: "Dashboard Analytics"

Text {
    text: kpis ? kpis.minutas : "SEM OBJETO KPIS"
    anchors.top: parent.top
    anchors.left: parent.left
    color: "red"
    font.pixelSize: 30
}

    Rectangle {
        anchors.fill: parent
        color: "#f4f5f8"

        RowLayout {
            anchors.fill: parent
            spacing: 0

            // Sidebar (mantido igual ao seu)
            // ...

            // Conteúdo principal
            ColumnLayout {
                Layout.fillWidth: true
                Layout.fillHeight: true
                spacing: 0

                // Topo: título da página
                Rectangle {
                    color: "transparent"
                    Layout.fillWidth: true
                    height: 70
                    RowLayout {
                        anchors.verticalCenter: parent.verticalCenter
                        anchors.left: parent.left
                        Text {
                            text: "Overview"
                            font.pixelSize: 32
                            font.bold: true
                            color: "#1a232e"
                        }
                    }
                }


                // Cards de KPIs
                Rectangle {
                    color: "#f4f5f8"
                    Layout.fillWidth: true

                    Rectangle {
                        id: kpiGroup
                        Layout.alignment: Qt.AlignHCenter
                        Layout.topMargin: 32
                        Layout.preferredWidth: parent.width * 0.95
                        Layout.preferredHeight: 120
                        radius: 18
                        color: "#fff"
                        border.color: "#e0e0e0"

                        // Sombra simulada
                        Rectangle {
                            anchors.fill: parent
                            color: "#000"
                            opacity: 0.04
                            radius: 18
                            z: -1
                        }

                        RowLayout {
                            spacing: 32
                            Layout.margins: 20

                            // Card 1: Minutas
                            Column {
                                spacing: 2
                                Layout.fillWidth: true
                                Layout.preferredWidth: 1
                                Text { text: "Minutas"; color: "#888"; font.pointSize: 13 }
                                Text {
                                    id: minutasKpi
                                    text: kpis.minutas
                                    font.pointSize: 32
                                    font.bold: true
                                    color: "#1a232e"
                                    horizontalAlignment: Text.AlignHCenter
                                }
                                Text { text: "Total de minutas"; color: "#43a047"; font.pointSize: 12 }
                            }
                            Rectangle { width: 1; color: "#eee"; height: 56 }

                            // Card 2: Média Produtividade
                            Column {
                                spacing: 2
                                Layout.fillWidth: true
                                Layout.preferredWidth: 1
                                Text { text: "Média Produtividade"; color: "#888"; font.pointSize: 13 }
                                Text {
                                    id: mediaKpi
                                    text: kpis.media
                                    font.pointSize: 32
                                    font.bold: true
                                    color: "#1a232e"
                                    horizontalAlignment: Text.AlignHCenter
                                }
                                Text { text: "Média por usuário"; color: "#43a047"; font.pointSize: 12 }
                            }
                            Rectangle { width: 1; color: "#eee"; height: 56 }

                            // Card 3: Dia Mais Produtivo
                            Column {
                                spacing: 2
                                Layout.fillWidth: true
                                Layout.preferredWidth: 1
                                Text { text: "Dia Mais Produtivo"; color: "#888"; font.pointSize: 13 }
                                Text {
                                    id: diaKpi
                                    text: kpis.dia
                                    font.pointSize: 28
                                    font.bold: true
                                    color: "#1a232e"
                                    horizontalAlignment: Text.AlignHCenter
                                }
                                Text { text: "Data e volume"; color: "#43a047"; font.pointSize: 12 }
                            }
                            Rectangle { width: 1; color: "#eee"; height: 56 }

                            // Card 4: Top 3 Usuários
                            Column {
                                spacing: 2
                                Layout.fillWidth: true
                                Layout.preferredWidth: 1.3
                                Text { text: "Top 3 Usuários"; color: "#888"; font.pointSize: 13 }
                                Text {
                                    id: top3Kpi
                                    text: kpis.top3
                                    font.pointSize: 15
                                    font.bold: true
                                    color: "#1a232e"
                                    wrapMode: Text.WordWrap
                                    maximumLineCount: 3
                                    elide: Text.ElideRight
                                    horizontalAlignment: Text.AlignHCenter
                                    verticalAlignment: Text.AlignVCenter
                                }
                                Text { text: "Ranking do mês"; color: "#43a047"; font.pointSize: 12 }
                            }
                        }
                    }
                }

                // Área de gráficos e tabelas
                Rectangle {
                    Layout.fillWidth: true
                    Layout.fillHeight: true
                    color: "#fff"
                    radius: 14
                    anchors.margins: 36
                    // Aqui você pode usar um Loader ou StackView para trocar o conteúdo
                }
            }
        }
    }

    // Força atualização dos textos dos KPIs ao carregar
    Component.onCompleted: {
        minutasKpi.text = kpis.minutas
        mediaKpi.text = kpis.media
        diaKpi.text = kpis.dia
        top3Kpi.text = kpis.top3
    }
}
